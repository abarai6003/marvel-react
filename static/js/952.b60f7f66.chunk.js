"use strict";(self.webpackChunkmarvel=self.webpackChunkmarvel||[]).push([[952],{569:(e,s,a)=>{a.d(s,{A:()=>i});var t=a(43),c=a(122),n=a(579);class r extends t.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e,s){console.log(e,s),this.setState({error:!0})}render(){return this.state.error?(0,n.jsx)(c.A,{}):this.props.children}}const i=r},122:(e,s,a)=>{a.d(s,{A:()=>i});const t=a.p+"static/media/error.1ec31f54541172cd3975.gif";var c=a(43),n=a(579);class r extends c.Component{render(){return(0,n.jsx)("img",{src:t,alt:"error",style:{display:"block",width:"250px",height:"250px",objectFit:"contain",margin:"0 auto"}})}}const i=r},882:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});const t=a.p+"static/media/mjolnir.61f31e1809f12183a524.png";var c=a(303),n=a(458),r=a(122),i=a(43),l=a(579);const o=e=>{let{char:s}=e;const a="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===s.thumbnail?{objectFit:"contain"}:{objectFit:"cover"};return(0,l.jsxs)("div",{className:"randomchar__block",children:[(0,l.jsx)("img",{style:a,src:s.thumbnail,alt:s.name,className:"randomchar__img"}),(0,l.jsxs)("div",{className:"randomchar__info",children:[(0,l.jsx)("p",{className:"randomchar__name",children:s.name}),(0,l.jsx)("p",{className:"randomchar__descr",children:s.description}),(0,l.jsxs)("div",{className:"randomchar__btns",children:[(0,l.jsx)("a",{href:"#",className:"button button__main",children:(0,l.jsx)("div",{className:"inner",children:"homepage"})}),(0,l.jsx)("a",{href:"#",className:"button button__secondary",children:(0,l.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})},d=()=>{const[e,s]=(0,i.useState)(null),{loading:a,error:d,getCharacter:h,clearError:m}=(0,c.A)();(0,i.useEffect)((()=>{_();const e=setInterval(_,3e3);return()=>{clearInterval(e)}}),[]);const u=e=>{s(e)};function _(){m();const e=Math.floor(400*Math.random()+1011e3);h(e).then(u)}const j=d?(0,l.jsx)(r.A,{}):null,x=a||d||!e?null:(0,l.jsx)(o,{char:e}),p=a?(0,l.jsx)(n.A,{}):null;return(0,l.jsxs)("div",{className:"randomchar",children:[j,p,x,(0,l.jsxs)("div",{className:"randomchar__static",children:[(0,l.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",(0,l.jsx)("br",{}),"Do you want to get to know him better?"]}),(0,l.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),(0,l.jsx)("button",{className:"button button__main",onClick:()=>{_()},children:(0,l.jsx)("div",{className:"inner",children:"try it"})}),(0,l.jsx)("img",{src:t,alt:"mjolnir",className:"randomchar__decoration"})]})]})},h=e=>{const[s,a]=(0,i.useState)([]),[t,o]=(0,i.useState)(210),[d,h]=(0,i.useState)(!1),[m,u]=(0,i.useState)(!1),{loading:_,error:j,getAllCharacters:x}=(0,c.A)(),p=(0,i.useRef)([]);(0,i.useEffect)((()=>{b(t,!0)}),[]);const b=(e,s)=>{h(!s),x(e).then(g)},g=e=>{let s=!1;e.length<9&&(s=!0),a((s=>[...s,...e])),o((e=>e+9)),h(!1),u((e=>s))},v=e=>{p.current.forEach((e=>e.classList.remove("char__item_selected"))),p.current[e].classList.add("char__item_selected"),p.current[e].focus()};const N=function(s){const a=s.map(((s,a)=>{const t="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===s.thumbnail?{objectFit:"contain"}:{objectFit:"cover"};return(0,l.jsxs)("li",{className:"char__item",ref:e=>p.current[a]=e,onClick:()=>{e.onCharSelected(s.id),v(a)},onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||(e.onCharSelected(s.id),v(a))},children:[(0,l.jsx)("img",{src:s.thumbnail,alt:s.name,style:t}),(0,l.jsx)("div",{className:"char__name",children:s.name})]},s.id)}));return(0,l.jsx)("ul",{className:"char__grid",children:a})}(s),f=j?(0,l.jsx)(r.A,{}):null,k=_&&!d?(0,l.jsx)(n.A,{}):null;return(0,l.jsxs)("div",{className:"char__list",children:[f,k,N,(0,l.jsx)("button",{className:"button button__main button__long",onClick:()=>b(t),disabled:d,style:{display:m?"none":"block"},children:(0,l.jsx)("div",{className:"inner",children:"load more"})})]})},m=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),(0,l.jsxs)("div",{className:"skeleton",children:[(0,l.jsxs)("div",{className:"pulse skeleton__header",children:[(0,l.jsx)("div",{className:"pulse skeleton__circle"}),(0,l.jsx)("div",{className:"pulse skeleton__mini"})]}),(0,l.jsx)("div",{className:"pulse skeleton__block"}),(0,l.jsx)("div",{className:"pulse skeleton__block"}),(0,l.jsx)("div",{className:"pulse skeleton__block"})]})]}),u=e=>{let{limitComics:s,char:a}=e;const{name:t,description:c,thumbnail:n,homepage:r,wiki:i,comics:o}=a,d="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===n?{objectFit:"contain"}:{objectFit:"cover"};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"char__basics",children:[(0,l.jsx)("img",{src:n,alt:t,style:d}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"char__info-name",children:t}),(0,l.jsxs)("div",{className:"char__btns",children:[(0,l.jsx)("a",{href:r,className:"button button__main",children:(0,l.jsx)("div",{className:"inner",children:"homepage"})}),(0,l.jsx)("a",{href:i,className:"button button__secondary",children:(0,l.jsx)("div",{className:"inner",children:"wiki"})})]})]})]}),(0,l.jsx)("div",{className:"char__descr",children:c}),(0,l.jsx)("div",{className:"char__comics",children:"Comics:"}),(0,l.jsxs)("ul",{className:"char__comics-list",children:[o.length>0?null:"There is no comics with this character",(e=>{const a=[];for(let t=0;t<e.length&&t!==s;t++)a[t]=(0,l.jsx)("li",{className:"char__comics-item",children:e[t].name},t);return a})(o)]})]})},_=e=>{let{selectedChar:s}=e;const[a,t]=(0,i.useState)(null),[o,d]=(0,i.useState)(10),{loading:h,error:_,getCharacter:j,clearError:x}=(0,c.A)();(0,i.useEffect)((()=>{b(s)}),[s]);const p=e=>{t((()=>e))},b=e=>{x(),s&&j(e).then(p)},g=h?(0,l.jsx)(n.A,{}):null,v=_?(0,l.jsx)(r.A,{}):null,N=_||h||!a?null:(0,l.jsx)(u,{char:a,limitComics:o}),f=a||h||_?null:(0,l.jsx)(m,{});return(0,l.jsxs)("div",{className:"char__info",children:[v,g,N,f]})},j=a.p+"static/media/vision.067d4ae1936d64a577ce.png";var x=a(569);const p=()=>{const[e,s]=(0,i.useState)(null);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.A,{children:(0,l.jsx)(d,{})}),(0,l.jsxs)("div",{className:"char__content",children:[(0,l.jsx)(x.A,{children:(0,l.jsx)(h,{onCharSelected:e=>{s(e)}})}),(0,l.jsx)(x.A,{children:(0,l.jsx)(_,{selectedChar:e})})]}),(0,l.jsx)("img",{className:"bg-decoration",src:j,alt:"vision"})]})}},303:(e,s,a)=>{a.d(s,{A:()=>c});var t=a(43);const c=()=>{const{loading:e,request:s,error:a,clearError:c}=(()=>{const[e,s]=(0,t.useState)(null),[a,c]=(0,t.useState)(!1);return{error:e,loading:a,request:(0,t.useCallback)((async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"Content-Type":"application/json"};c(!0);try{const s=await fetch(e,{method:a,body:t,headers:n});if(!s.ok)throw new Error("Could not fetch ".concat(e,", status: ").concat(s.status));const r=await s.json();return c(!1),r}catch(r){throw s(r.message),r}}),[]),clearError:(0,t.useCallback)((()=>s(null)),[])}})(),n="https://gateway.marvel.com:443/v1/public/",r="apikey=c5d6fc8b83116d92ed468ce36bac6c62",i=e=>({id:e.id,name:e.title,description:e.description?"".concat(e.description.slice(0,210),"..."):"There is no description for this character",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items}),l=e=>{var s;return{id:e.id,title:e.title,description:e.description||"There is no description",pageCount:e.pageCount?"".concat(e.pageCount," pages"):"No information about the number of pages",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,language:(null===(s=e.textObjects[0])||void 0===s?void 0:s.language)||"en-us",price:e.prices[0].price?"".concat(e.prices[0].price,"$"):"not available"}};return{loading:e,error:a,getAllCharacters:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:210;return(await s("".concat(n,"characters?limit=9&offset=").concat(e,"&").concat(r))).data.results.map(i)},getCharacter:async e=>{const a=await s("".concat(n,"characters/").concat(e,"?").concat(r));return i(a.data.results[0])},clearError:c,getAllComics:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(await s("".concat(n,"comics?orderBy=issueNumber&limit=8&offset=").concat(e,"&").concat(r))).data.results.map(l)},getComic:async e=>{const a=await s("".concat(n,"comics/").concat(e,"?").concat(r));return l(a.data.results[0])}}}}}]);
//# sourceMappingURL=952.b60f7f66.chunk.js.map